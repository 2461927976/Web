<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>AMI</title>
</head>
<body>
	<p>二进制编码序列为：0 1 1 1 0 0 0 0 0 0 1 0 1 0 0 0 0 1</p>
	<p>AMI码为</p>
	<canvas id="ami" height="400" width="1200" style="border: 1px solid #000;">
		你的浏览器不支持canvas
	</canvas>
	<script type="text/javascript">
		var ami = document.getElementById("ami");
		var ctx = ami.getContext("2d");
		var arr = [0,1,1,1,0,0,0,0,0,0,1,0,1,0,0,0,0,1];
		var count = 0;
		var x = 50;
		var y = 200;

		for(var i=0;i<arr.length;i++){
			if (arr[i] == 1) {
				count++;
				if (count%2 == 0) {
					arr[i] = -1;
				}
			}
		}

		ctx.beginPath();
		ctx.strokeStyle = "#f00";
		ctx.lineWidth = 2;
		ctx.moveTo(0,200);
		ctx.lineTo(1200,200);
		ctx.stroke();

		ctx.beginPath();
		ctx.strokeStyle = "#000";
		ctx.arc(50,200,1,0,2*Math.PI);
		ctx.stroke();

		ctx.beginPath();
		ctx.strokeStyle = "#000";
		ctx.moveTo(50,200);
		ctx.lineTo(100,200);

		for (var i = 0; i < arr.length; i++) {
			if (arr[i] == arr[i+1]) {
				console.log("相等");
				ctx.lineTo((x+50*(i+1)),y);
			}
			if (arr[i] < arr[i+1]) {
				if ((arr[i]-arr[i+1]) == -1) {
					console.log("小于1");
					if (arr[i] == 0) {
						ctx.lineTo((x+50*(i+1)),(y-50));
						ctx.lineTo((x+50*(i+2)),(y-50));
					}
					else if (arr[i+1] == 0) {
						ctx.lineTo(x+50*(i+1),y+50);
						ctx.lineTo(x+50*(i+1),y);
						ctx.lineTo(x+50*(i+2),y);
					}
					else{
						ctx.lineTo((x+50*(i+2)),y);
					}
				}else{
					console.log("小于2");
					ctx.lineTo((x+50*(i+1)),(y-50));
					ctx.lineTo((x+50*(i+2)),(y-50));
				}
			}
			if (arr[i] > arr[i+1]) {
				console.log("大于");
				if (arr[i] - arr[i+1] == 1) {
					console.log("大于1");
					if (arr[i+1] == 0) {
						ctx.lineTo((x+50*(i+1)),y);
					}
					else if(arr[i] == 0) {
						ctx.lineTo(x+50*(i+1),y);
						ctx.lineTo(x+50*(i+1),y+50);
						ctx.lineTo(x+50*(i+2),y+50);
					}
					else{
						ctx.lineTo((x+50*(i+1)),(y+50));
						ctx.lineTo((x+50*(i+1)),(y+50));
					}
				}
				else{
					console.log("大于2");
					ctx.lineTo((x+50*(i+1)),(y+50));
					ctx.lineTo((x+50*(i+2)),(y+50));
				}
			}
		}
		ctx.lineTo(x+50*arr.length,y);
		ctx.lineTo(1200,y);
		ctx.stroke();
	</script>
</body>
</html>